#%Validation Profile 1.0

profile: patient

version: 1.0.0

violation:
  - patient-shape

validations:
  patient-shape:
    message: Schema for resource of type Patient is not valid
    targetClass: apiContract.EndPoint
    if:
      propertyConstraints:
        shacl.name:
          pattern: Patient
    then:
      and:
        - propertyConstraints:
            shacl.property:
              atLeast:
                count: 1
                validation:
                  propertyConstraints:
                    shacl.name:
                      pattern: identifier
        - propertyConstraints:
            shacl.property:
              atLeast:
                count: 1
                validation:
                  propertyConstraints:
                    shacl.name:
                      pattern: active
        - propertyConstraints:
            shacl.property/shacl.name:
              in:
                - identifier
                - active
                - name
                - telecom
                - gender
                - birthDate
                - deceased
                - address
                - maritalStatus
                - multipleBirth
                - photo
                - contact
                - communication
                - generalPractitioner
                - managingOrganization
                - link
