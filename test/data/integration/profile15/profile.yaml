#%Validation Profile 1.0

profile: Anypoint Best Practices

violation:
  - resource-should-be-coarse-grained


validations:

  resource-should-be-coarse-grained:
    message: Resources should be coarse-grained not fine-grained
    targetClass: apiContract.Operation
    propertyConstraints:
      apicContract.method:
        pattern: get
      apiContract.returns:
        atLeast:
          count: 1
          validation:
            propertyConstraints:
              apiContract.statusCode:
                pattern: "200"
              apiContract.payload / shapes.schema:
                atLeast:
                  count: 1
                  validation:
                    and:
                      - propertyConstraints:
                          '@type':
                            containsAll:
                              - "shacl:NodeShape"
                      - propertyConstraints:
                          shacl.name:
                            minCount: 1